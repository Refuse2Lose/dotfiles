#!/usr/bin/env bash

                     ######################
                     ## ALIASES  FOR GIT ##
                     ######################
##################################################################
#                 Created by: Mitchell Woodbine                  #
#                   mitchellwoodbine@gmail.com                   #
#               https://github.com/vindennl48/mybash             #
##################################################################

#edit bash file
alias editgit="code ~/bin/mybash/.git_aliases"

## prelim aliases ##
#######################################################################
#get the current branch name
alias branch-name="git rev-parse --abbrev-ref HEAD"

## useful aliases ##
#######################################################################
#show local and remote branches
alias showa="git branch -a"
#show local branches
alias show="git branch"
#go to branch
alias goto="git checkout"
#show status
alias stat="git status"
#show log
alias glog="git log"
#show commit gui
alias giti="git citool"

#create new branch
alias newbranch="git checkout -b"
#create new orphan branch (no commits)
newemptybranch() {
    git checkout --orphan $1; git rm -rf .
}

#create and drop stash, used for being able to switch branches
alias stash="git stash; git stash drop"

# ADD COMMIT AND PUSH
#####################
#staging a file
alias stage="git add"
#unstage a file
alias unstage="git reset HEAD" #filename
#shorthand commit
alias commitm="git commit -m"
#longhand commit
alias commit="git commit"
#stage all and commit
update() {
    if [ -z "$@" ]; then
        git add .; git commit -m 'generic commit'
    else
        inp="$@";
        git add .; git commit -m "$inp"
    fi
}
# #general update, specify remote
# genupdate() {
#     git add .; git commit -m 'generic commit'
# }
#push up to remotes
push() {
    if [ -z "$1" ]; then
        git push origin $(branch-name)
    else
        git push $1 $(branch-name)
    fi
}
#update and push
uppush() {
    if [ -z $1 ]; then
        $(update);
        $(push)
    else
        inp="$@";
        $(update "$inp");
        $(push)
    fi
}
#####################

#delete local branch
deletelocal() {
    $(goto) master; 
    git branch -D $1
}
#delete remote branch
deleteremote() {
    $(goto) master;
    git push $1 --delete $2
}
#delete local and remote branches
deleteall() {
    $(goto) master; $(deletelocal "$2"); $(deleteremote "$1" "$2")
}

#clone from repository, make sure you have ssh set up
#enter your repo as an argument
clone() {
    git clone git@github.com:vindennl48/$1.git
}
#This is for non-ssh 
#enter user and repo
cloneh() {
    git clone https://github.com/$1/$2
}

## heroku aliases ##
#######################################################################
#set buildpacks for scraping
heroku_setbp() {
    echo "xvfb" > Aptfile;
    heroku buildpacks:clear;
    heroku buildpacks:add https://github.com/vindennl48/heroku-buildpack-apt;
    heroku buildpacks:add https://github.com/vindennl48/heroku-buildpack-phantomjs;
    heroku buildpacks:add heroku/ruby
}

